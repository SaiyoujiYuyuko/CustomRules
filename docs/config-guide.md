# 配置使用指南

## 项目概述

本项目的目标是提供一套完整的代理配置解决方案，支持多种代理工具的配置管理和优化。

## 目录结构说明

```
CustomRules/
├── custom-rules/          # 通用自定义规则（核心）
├── mihomo/               # Mihomo专用配置
├── sing-box/             # Sing-box专用配置
├── docs/                 # 文档目录
├── tools/                # 工具脚本
└── README.md            # 项目主文档
```

## 快速开始

### 1. 选择你的代理工具

#### Mihomo 用户
1. 进入 `mihomo/` 目录
2. 参考 `mihomo/README.md` 进行配置
3. 导入所需的覆写脚本和配置文件

#### Sing-box 用户
1. 进入 `sing-box/` 目录
2. 复制规则文件到你的配置目录
3. 在主配置中引用规则文件

### 2. 添加自定义规则

所有自定义规则都存放在 `custom-rules/` 目录：

- **域名规则**：`custom-rules/domains/`
- **IP段规则**：`custom-rules/ip-ranges/`
- **进程规则**：`custom-rules/processes/`

### 3. 使用工具脚本

`tools/` 目录包含实用脚本：
- `rule-converter.js` - 规则格式转换
- `config-validator.js` - 配置文件验证
- `batch-updater.sh` - 批量更新规则

## 配置最佳实践

### 规则管理
1. **分类管理**：按用途分类存放规则
2. **避免重复**：检查规则是否已存在
3. **定期维护**：清理无效和过期规则
4. **测试验证**：新规则需要充分测试

### 性能优化
1. **规则顺序**：高频访问规则放前面
2. **精简配置**：移除不必要的规则和配置
3. **批量更新**：使用工具脚本批量处理

### 安全考虑
1. **来源可信**：只使用可信的规则源
2. **定期审查**：检查规则的安全性和隐私性
3. **备份配置**：修改前备份现有配置

## 故障排除

### 常见问题

1. **配置文件语法错误**
   - 使用 YAML/JSON 语法检查工具
   - 检查缩进和引号使用

2. **规则不生效**
   - 检查规则文件路径是否正确
   - 验证规则格式是否符合工具要求
   - 确认规则顺序是否合理

3. **性能问题**
   - 减少规则数量
   - 优化规则匹配顺序
   - 调整检查间隔

### 获取帮助

1. 查看各目录的 README 文件
2. 使用 `tools/config-validator.js` 验证配置
3. 参考官方文档和社区资源

## 贡献指南

欢迎通过以下方式贡献：

1. **提交规则**：在对应目录添加新的规则文件
2. **改进文档**：完善文档内容和示例
3. **工具开发**：开发新的工具脚本
4. **问题反馈**：报告配置问题和建议

### 提交规范

- 规则文件需要清晰的注释
- 配置变更需要说明用途
- 文档更新需要准确详实
- 代码需要遵循项目规范

## 许可证

本项目采用 Apache-2.0 许可证，使用时请遵守相关条款。